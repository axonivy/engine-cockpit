<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">

<f:facet name="header">
  <i class="material-icons table-icon panel-title-icon">info</i>
  <h:outputText value="Search Engine information" />
</f:facet>
<h:form id="searchEngineInfoForm">
  <p:growl id="searchEngineMessages" for="searchEngineMessages">
    <p:autoUpdate/>
  </p:growl>
  <p:commandButton id="queryToolBtn" title="Run Search Engine Query" icon="ui-icon-bug-report" update="searchEngineQueryToolModal"
    actionListener="#{searchEngineBean.setActiveIndex(null)}"
    styleClass="amber-btn card-button" oncomplete="PF('searchEngineQueryToolModal').show()" />
  <p:commandButton id="configSearchEngine" title="Configure Search Engine" icon="ui-icon-settings" type="button"
    styleClass="secondary-btn card-button" onclick="window.location.href='systemconfig.xhtml?filter=ElasticSearch'" />
  <p:panelGrid columns="2" columnClasses="ui-grid-col-3, ui-grid-col-9" layout="grid" styleClass="ui-panelgrid-blank grey-label-panel">
    <label>Name</label>
    <h:outputText id="name" value="#{searchEngineBean.elasticSearch.clusterName}" />
    <label>Url</label>
    <h:outputText id="url" value="#{searchEngineBean.elasticSearch.serverUrl}" />
    <label>Version</label>
    <h:panelGroup>
      <h:outputText id="version" value="#{searchEngineBean.elasticSearch.version}" />
      <h:outputText rendered="#{searchEngineBean.elasticSearch.version ne '7.3.0'}">
        <i class="material-icons search-machine-health-yellow" style="position: relative; top: 3px;"
          title="This elastic search version is not supported">warning</i>
      </h:outputText>
    </h:panelGroup>
    <label>State</label>
    <h:panelGroup id="state">
      <i class="material-icons search-machine-state search-machine-state-#{searchEngineBean.state}">#{searchEngineBean.state ? 'check' : 'close'}</i>
    </h:panelGroup>
    <label>Health</label>
    <h:panelGroup id="health">
      <i class="material-icons search-machine-state search-machine-health-#{searchEngineBean.elasticSearch.health.state}" 
        title="#{searchEngineBean.elasticSearch.health.state}">#{searchEngineBean.elasticSearch.health.icon}</i>
    </h:panelGroup>
  </p:panelGrid>
</h:form>

</html>