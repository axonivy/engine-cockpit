<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<h:body>
	<ui:composition template="/template/template.xhtml">
		<ui:define name="title">Roles</ui:define>
		
		<ui:define name="breadcrumb">
	        <li>Security</li>
	        <li>/</li>
	        <li><a href="roles.xhtml">Roles</a></li>
	    </ui:define>
		
		<ui:define name="content">
			<div class="ui-fluid roles">
                <div class="ui-g">
                    <div class="ui-g-12">
                    	<h:form id="form">
	                        <p:growl id="msgs" showDetail="true" />
	                    	<p:tabView styleClass="card card-w-title tab-view-card" value="#{applicationBean.applications}" activeIndex="#{applicationBean.selectedApplicationIndex}" var="app">
						        <p:ajax event="tabChange" listener="#{applicationBean.updateSelectedApplication}"/>
						        <p:tab title="#{app.name}">
							        <div class="ui-g">
				                    	<div class="ui-g-12 ui-md-10">
						            		<h1><i class="material-icons card-title-icon">group</i>Roles</h1>
						            	</div>
						            	<div class="ui-g-12 ui-md-2" style="margin: auto;">
							            	<p:commandButton disabled="true" id="newRoleBtn_#{app.id}" value="New" icon="ui-icon-add" type="button"/>
							            </div>
						            </div>
			                        <div class="ui-g">
				                        <div class="ui-g-12 ui-lg-12" style="padding-bottom: 0;">
				                        	<div class="ui-datatable-header ui-widget-header ui-corner-top">
					                        	<div class="ui-outputpanel ui-widget">
						                        	<label style="float: left;" class="ui-outputlabel ui-widget table-search-icon">
						                        		<i class="material-icons">search</i>
						                        	</label>
						                        	<p:inputText style="width: calc(100% - 24px); color: #ffffff;" placeholder="Search" value="#{rolesBean.filter}">
						                        		<p:ajax event="keyup" delay="300" update=":form" listener="#{rolesBean.filterUpdate}"/>
						                        	</p:inputText>
					                        	</div>
				                        	</div>
				                        </div>
				                        <div class="ui-g-12 ui-lg-12" style="padding-top:0;">
				                        	<h:form id="treeForm_#{app.id}">
						                        <p:tree id="tree_#{app.id}" widgetVar="tree_#{app.id}" value="#{rolesBean.getRolesForApp(app.id)}" var="role" selectionMode="single" 
						                        		selection="#{rolesBean.selectedRole}">
						                        	<p:ajax event="select" listener="#{rolesBean.onSelect}" update=":form:msgs" />
											        <p:treeNode icon="ui-icon-group">
											            <h:outputText value="#{role.name}" />
											        </p:treeNode>
											    </p:tree>
								    		</h:form>
				                        </div>
			                        </div>
						        </p:tab>
						    </p:tabView>
                        </h:form>
                	</div>
                </div>
            </div>
		</ui:define>
	</ui:composition>
</h:body>
</html>