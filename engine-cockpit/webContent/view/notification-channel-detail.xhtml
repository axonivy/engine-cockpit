<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:cc="http://java.sun.com/jsf/composite/composite">
<h:body>
  <f:metadata>
    <f:viewParam name="channel" value="#{notificationChannelDetailBean.channelId}" />
    <f:viewParam name="system" value="#{notificationChannelDetailBean.system}" />
    <f:viewAction action="#{notificationChannelDetailBean.onload}" />
  </f:metadata>

  <ui:composition template="../includes/template/charts-template.xhtml">

    <ui:define name="breadcrumb">
      <li><span>Services</span></li>
      <li>/</li>
      <li><a href="notification-channels.xhtml">Notification Channels</a></li>
      <li>/</li>
      <li><a href="#{notificationChannelDetailBean.config.getViewUrl()}">#{notificationChannelDetailBean.config.displayName}</a></li>
    </ui:define>

    <ui:define name="topbar-items">
      <cc:TopBarItem href="#{advisorBean.cockpitEngineGuideUrl}services.html#notification-channel-detail" />
    </ui:define>

    <ui:define name="content">
      <div class="card">
        <p:growl id="channelSaveSuccess" for="channelSaveSuccess">
          <p:autoUpdate />
        </p:growl>
        <div class="p-d-flex p-ai-center p-mb-3">
          <i class="p-pr-3 #{notificationChannelDetailBean.config.displayicon} card-title-icon"></i>
          <h2 class="p-m-0">#{notificationChannelDetailBean.config.displayName}</h2>
          <p:commandButton id="reset" actionListener="#{notificationChannelDetailBean.onload}" title="Reset changes"
            icon="si si-undo" styleClass="p-col-fixed p-ml-auto ui-button-danger rounded-button" update="form"/>
          <p:commandButton id="save" actionListener="#{notificationChannelDetailBean.save}" title="Save changes"
            icon="si si-floppy-disk" styleClass="p-col-fixed p-ml-1 ui-button-success rounded-button"/>
        </div>
        <h:form id="form">
          <p:panelGrid columns="2" columnClasses="p-col-12 p-md-2 p-lg-2, p-col-12 p-md-10 p-lg-10"
            layout="flex" styleClass="grey-label-panel" style="margin: 15px">
            <p:outputLabel for="enabled" value="Enabled" />
            <p:selectBooleanCheckbox id="enabled" value="#{notificationChannelDetailBean.config.enabled}">
              <p:ajax update="@form" />
            </p:selectBooleanCheckbox>
            <p:outputLabel for="allEvents" value="All Events" />
            <p:selectBooleanCheckbox id="allEvents" value="#{notificationChannelDetailBean.config.allEventsEnabled}"
              disabled="#{!notificationChannelDetailBean.config.enabled}">
              <p:ajax update="@form" />
            </p:selectBooleanCheckbox>
          </p:panelGrid>
          
          <p:dataTable id="events" var="event" value="#{notificationChannelDetailBean.config.events}">
            <p:column headerText="Event" sortBy="#{event.kind}">
              <h:outputText value="#{event.kind}" styleClass="event-kind" />
            </p:column>
            <p:column>
              <p:selectBooleanCheckbox id="eventEnabled" value="#{event.enabled}"
                disabled="#{!notificationChannelDetailBean.config.enabled || notificationChannelDetailBean.config.allEventsEnabled}">
                <p:ajax />
              </p:selectBooleanCheckbox>
            </p:column>
          </p:dataTable>
        </h:form>
      </div>
    </ui:define>
  </ui:composition>
</h:body>

</html>
