<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:cc="http://xmlns.jcp.org/jsf/composite/composite">
<h:body>
  <f:metadata>
    <f:viewParam name="appName" value="#{pmvDetailBean.appName}" />
    <f:viewParam name="appName" value="#{managerBean.selectedApplicationName}" />
    <f:viewParam name="appVersion" value="#{pmvDetailBean.appVersion}" />
    <f:viewParam name="pmvName" value="#{pmvDetailBean.pmvName}" />
    <f:viewAction action="#{pmvDetailBean.onload}" />
  </f:metadata>

  <ui:composition template="../includes/template/template.xhtml">

    <ui:define name="breadcrumb">
      <li><a href="applications.xhtml">#{ivy.cm.co('/common/Applications')}</a></li>
      <li>/</li>
      <li><a href="#{pmvDetailBean.applicationDetailLink}">#{pmvDetailBean.appName}</a></li>
      <li>/</li>
      <li><a href="#{pmvDetailBean.pmv.detailView}">#{pmvDetailBean.pmv.name}</a></li>
    </ui:define>

    <ui:define name="topbar-items">
      <cc:TopBarItem href="#{advisorBean.cockpitEngineGuideUrl}applications.html#pmv-detail" />
    </ui:define>

    <ui:define name="content">
      <div class="layout-dashboard">
        <div class="grid">
          <div class="col-12 md:col-12 xl:col-12">
            <div class="card">
              <div class="card-header">
                <div class="card-title flex align-items-center">
                  <i class="pr-3 si si-information-circle"></i>
                  <h6 class="m-0">#{ivy.cm.co('/pmvDetail/PMVInformation')}</h6>
                </div>
              </div>

              <p:panelGrid columns="2" columnClasses="col-12 md:col-4 lg:col-4, col-12 md:col-8 lg:col-8" layout="flex"
                styleClass="grey-label-panel ui-fluid">
                <label>#{ivy.cm.co('/common/Name')}</label>
                <h:outputText value="#{pmvDetailBean.pmv.name}" />
                <label>Library ID</label>
                <h:outputText value="#{pmvDetailBean.pmv.libraryId}" />
                <label>Library #{ivy.cm.co('/common/Version')}</label>
                <h:outputText value="#{pmvDetailBean.pmv.libraryVersion}" />
                <label>#{ivy.cm.co('/pmvDetail/LastDeployed')}</label>
                <h:outputText value="#{pmvDetailBean.pmv.lastChangeDate}" />
                <label>#{ivy.cm.co('/pmvDetail/ProjectVersion')}</label>
                <h:outputText value="#{pmvDetailBean.pmv.projectVersion}" />
              </p:panelGrid>
            </div>
          </div>

          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <div class="card-title flex align-items-center">
                  <i class="pr-3 si si-navigation-up-circle"></i>
                  <h6 class="m-0">#{ivy.cm.co('/pmvDetail/AllPMVsDependingOnPMV')}</h6>
                </div>
              </div>
              <p:dataTable id="dependentPmvTable" var="pmv" value="#{pmvDetailBean.dependentPmvs}"
                emptyMessage="#{ivy.cm.content('/pmvDetail/DependentPMVTableEmptyMessage').replace('name', pmvDetailBean.pmv.name).get()}">
                <p:column headerText="#{ivy.cm.co('/pmvDetail/PMV')}">
                  <h:outputLink value="#{pmv.detailView}">
                    <h:outputText value="#{pmv.name}" title="#{pmv.libraryId}">
                      <i class="si si-#{pmv.icon}" style="margin-right: 5px;" />
                    </h:outputText>
                  </h:outputLink>
                </p:column>
                <p:column headerText="#{ivy.cm.co('/common/Version')}">
                  <h:outputText value="#{pmv.qualifiedVersion}" />
                </p:column>   
              </p:dataTable>
            </div>
          </div>

          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <div class="card-title flex align-items-center">
                  <i class="pr-3 si si-navigation-down-circle"></i>
                  <h6 class="m-0">#{ivy.cm.co('/pmvDetail/AllPMVsRequiredByPMV')}</h6>
                </div>
              </div>
              <p:dataTable id="requriedPmvTable" var="pmv" value="#{pmvDetailBean.requiredPmvs}"
                emptyMessage="#{ivy.cm.content('/pmvDetail/DependentPMVTableEmptyMessage').replace('name', pmvDetailBean.pmv.name).get()} 
                  #{not empty pmvDetailBean.requiredPmvs ? ivy.cm.co('/pmvDetail/SpecifiedRequiredProjectsMessage') : ''}">
                <p:column headerText="PMV">
                  <h:outputLink value="#{pmv.detailView}">
                    <h:outputText value="#{pmv.name}" title="#{pmv.libraryId}">
                      <i class="si si-#{pmv.icon}" style="margin-right: 5px;" />
                    </h:outputText>
                  </h:outputLink>
                </p:column>
                <p:column headerText="#{ivy.cm.co('/common/Version')}">
                  <h:outputText value="#{pmv.qualifiedVersion}" />
                </p:column>
               </p:dataTable>
            </div>
          </div>
        </div>
      </div>
    </ui:define>
  </ui:composition>
</h:body>

</html>
