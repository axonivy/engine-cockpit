<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<p:dialog id="licenceEventsDialog" header="Licence Events" widgetVar="licenceEventsDialog" modal="true"
  closeOnEscape="true" width="50%">
  <h:form id="licenceEventForm">
    <div class="licence-messages timeline">
      <ul>
        <p:repeat value="#{licenceBean.licenceEvents}" var="event">
          <li class="p-ai-center">
            <i class="p-mr-2 p-mt-0 si si-xl si-#{event.level eq 'ERROR' ? 'alert-circle error' : 'road-sign-warning warning'}"></i>
            <h:outputText styleClass="p-mr-2 name" value="#{event.timestamp}" />
            <h:outputText styleClass="p-mr-1 message" value="#{event.message}" />
            <p:commandButton icon="si si-check-1" title="Confirm" styleClass="p-col-fixed p-ml-auto ui-button-secondary rounded-button ui-button-outlined"
              id="confirmEventBtn" actionListener="#{licenceBean.confirmLicenceEvent(event)}" update="@form" />
          </li>
        </p:repeat>
      </ul>
    </div>
    <p:commandButton id="confirmAllLicenceEvents" ajax="false" 
      actionListener="#{licenceBean.confirmAllLicenceEvents()}" value="Confirm all" icon="si si-check-double-1"
      styleClass="modal-input-button" />
    <p:commandButton id="closeLicenceEventsDialog" onclick="PF('licenceEventsDialog').hide();" value="Close"
      type="button" styleClass="ui-button-secondary ui-button-flat modal-input-button" />
  </h:form>
</p:dialog>

</html>
