<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">

<div class="card">
  <h:form id="searchEngineInfoForm">
    <p:growl id="searchEngineMessages" for="searchEngineMessages">
      <p:autoUpdate />
    </p:growl>
    <div class="card-header">
      <div class="card-title flex align-items-center">
        <i class="pr-3 si si-information-circle"></i>
        <h6 class="m-0">#{ivy.cm.co('/common/SearchEngine')}</h6>
        <p:commandButton id="queryToolBtn" title="#{ivy.cm.co('/common/RunSearchEngineQuery')}" icon="si si-monitor-heart-beat-search"
          update="searchEngineQueryToolModal" actionListener="#{searchEngineBean.setActiveIndex(null)}"
          styleClass="ml-auto rounded-button" oncomplete="PF('searchEngineQueryToolModal').show()" />
        <p:linkButton id="configSearchEngine" title="#{ivy.cm.co('/searchEngineInformation/ConfigureSearchEngineButtonTitle')}" icon="si si-cog" type="button"
          styleClass="ml-1 ui-button-secondary rounded-button" href="systemconfig.xhtml?filter=SearchEngine" />
      </div>
    </div>
    <p:panelGrid columns="2" columnClasses="col-6, col-6" layout="flex">
      <p:panelGrid columns="2" columnClasses="col-3, col-9" layout="flex"
        styleClass="grey-label-panel">
        <label>#{ivy.cm.co('/common/Name')}</label>
        <h:outputText id="name" value="#{searchEngineBean.searchEngine.clusterName}" />
        <label>#{ivy.cm.co('/common/Url')}</label>
        <h:outputText id="url" value="#{searchEngineBean.searchEngine.serverUrl}" />
        <label>#{ivy.cm.co('/common/State')}</label>
        <h:panelGroup id="state">
          <i
            class="si si-#{searchEngineBean.state ? 'check-circle-1' : 'remove-circle'} icon-bold search-machine-state-#{searchEngineBean.state}"></i>
        </h:panelGroup>
        <label>#{ivy.cm.co('/common/Health')}</label>
        <h:panelGroup id="health">
          <i class="si si-#{searchEngineBean.searchEngine.health.icon} icon-bold search-machine-health-#{searchEngineBean.searchEngine.health.state}"
            title="#{searchEngineBean.searchEngine.health.hint}"></i>
        </h:panelGroup>
        </p:panelGrid>
        
        <p:panelGrid columns="2" columnClasses="col-5 flex, col-7 flex" layout="flex"
          styleClass="grey-label-panel">
          <label>#{ivy.cm.co('/common/Version')}</label>
          <h:panelGroup>
            <h:outputText id="version" value="#{searchEngineBean.searchEngine.version}" />
            <h:outputText rendered="#{searchEngineBean.searchEngine.notSupported}">
              <i class="si si-lg si-road-sign-warning search-machine-health-yellow"
              style="position: relative; top: 3px; font-weight: 700;"
              title="#{ivy.cm.co('/searchEngineInformation/NotSupportESVersionMessage')}"></i>
            </h:outputText>
          </h:panelGroup>

          <h:panelGroup>
            <label>#{ivy.cm.co('/searchEngineInformation/DiskThresholdEnabled')}</label>
            <h:panelGroup id="diskThresholdHelp" styleClass="flex align-items-center ml-1">
              <i class="si si-question-circle"></i>
              <p:tooltip for="@parent" value="#{ivy.cm.co('/searchEngineInformation/DiskThresholdEnabledInfo')}" position="top" />
            </h:panelGroup>
          </h:panelGroup>
          <h:outputText id="diskThreshold" value="#{searchEngineBean.searchEngine.watermark.thresholdEnabled()}" />
  
          <h:panelGroup>
            <label>#{ivy.cm.co('/searchEngineInformation/WatermarkLow')}</label>
            <h:panelGroup id="watermarkLowHelp" styleClass="flex align-items-center ml-1">
              <i class="si si-question-circle"></i>
              <p:tooltip for="@parent" value="#{ivy.cm.co('/searchEngineInformation/WatermarkLowInfo')}"
               position="top" />
            </h:panelGroup>
          </h:panelGroup>
          <h:outputText id="watermarkLow" value="#{searchEngineBean.searchEngine.watermark.low()}" />
  
          <h:panelGroup>
            <label>#{ivy.cm.co('/searchEngineInformation/WatermarkHigh')}</label>
            <h:panelGroup id="watermarkHighHelp" styleClass="flex align-items-center ml-1">
              <i class="si si-question-circle"></i>
              <p:tooltip for="@parent" value="#{ivy.cm.co('/searchEngineInformation/WatermarkHighInfo')}" 
                position="top" />
            </h:panelGroup>
          </h:panelGroup>
          <h:outputText id="watermarkHigh" value="#{searchEngineBean.searchEngine.watermark.high()}" />

          <h:panelGroup>
            <label>#{ivy.cm.co('/searchEngineInformation/FloodStage')}</label>
            <h:panelGroup id="floodStageHelp" styleClass="flex align-items-center ml-1">
              <i class="si si-question-circle"></i>
              <p:tooltip for="@parent" value="#{ivy.cm.co('/searchEngineInformation/FloodStageInfo')}" 
                position="top" />
            </h:panelGroup>
          </h:panelGroup>
          <h:outputText id="floodStage" value="#{searchEngineBean.searchEngine.watermark.floodStage()}" 
            title="#{ivy.cm.co('/searchEngineInformation/FloodStageWarning')}"/>
        </p:panelGrid>

    </p:panelGrid>
  </h:form>
</div>

</html>
