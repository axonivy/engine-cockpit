<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
  xmlns:pa="http://primefaces.org/serenity">

  <div class="layout-topbar">
    <a href="#" class="menu-btn">
      <i class="si si-navigation-menu"></i>
    </a>
    <a href="#" class="topbar-menu-btn">
      <i class="si si-single-neutral-circle"></i>
    </a>

    <div class="layout-topbar-menu-wrapper">
      <ul class="topbar-menu animated">
        <li id="sessionUser" class="profile-item">
          <a href="#">
            <span class="profile-image-wrapper">
              <h:outputText rendered="#{not empty loginBean.gravatarHash}">
                <img src="https://www.gravatar.com/avatar/#{loginBean.gravatarHash}?d=404" style="border-radius: 20px; display: none;" onload="checkGravatarImg(this);"/>
              </h:outputText>
              <i class="si si-single-neutral-circle" style="font-size: 36px; padding: 2px;"></i>
            </span>
            <span id="sessionUserName" class="topbar-item-name profile-name">#{loginBean.sessionUserName}</span>
          </a>
          <ul class="animated">
            <li role="menuitem">
              <a href="#" onclick="window.open('#{advisorBean.cockpitEngineGuideUrl}index.html'); return false;">
                <i class="si si-lg si-question-circle"></i>
                <span>Help</span>
              </a>
            </li>
            <li role="menuitem">
              <p:commandLink id="sessionLogoutBtn" actionListener="#{loginBean.logout}">
                <i class="si si-lg si-logout-1"></i>
                <span>Logout</span>
              </p:commandLink>
            </li>
            <li role="menuitem">
              <p:commandLink id="devModeBtn" type="button"
                onclick="$.cookie('advanced', $.cookie('advanced') != 'true', { expires: 30, path: '/' }); window.location.reload();">
                <i class="si si-lg si-hammer-wench"></i>
                <span>Advanced Mode #{cookie['advanced'].value eq 'true' ? 'Off' : 'On'}</span>
              </p:commandLink>
            </li>
            <li>
              <p:commandLink id="supportReport" type="button" onclick="PF('supportReportModal').show()">
                <i class="si si-lg si-help-wheel"></i>
                <span>Support Report</span>
              </p:commandLink>
            </li>
          </ul>
        </li>
        <h:outputText rendered="#{not empty licenceBean.licenceEvents}">
          <li class="topbar-notifications licence-notification">
            <a href="#" onclick="PF('licenceEventsDialog').show();">
              <i class="topbar-icon si si-alarm-bell-timer animated swing"></i>
              <span class="topbar-badge animated rubberBand">#{licenceBean.licenceEventCount}</span>
              <span class="topbar-item-name">Messages</span>
            </a>
          </li>
        </h:outputText>
        <h:outputText rendered="#{managerBean.restartEngine}">
          <li class="topbar-notifications restart-notification">
            <a href="#">
              <i class="topbar-icon si si-road-sign-warning animated swing"></i>
              <span class="topbar-item-name">Restart Engine</span>
            </a>
            <ul class="animated">
              <li role="menuitem">
                <a href="logs.xhtml?log=config.log">
                  <i class="si si-lg si-synchronize-arrow-clock"></i>
                  <span style="max-width: calc(100% - 40px)">You have changed settings that require an engine
                    restart!</span>
                </a>
              </li>
            </ul>
          </li>
        </h:outputText>
      </ul>
    </div>
  </div>

  <ui:include src="../dialogs/licenceevents.xhtml" />
  <ui:include src="../dialogs/supportreport.xhtml" />
</ui:composition>
