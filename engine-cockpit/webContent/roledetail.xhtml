<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<h:body>
	<f:metadata>
		<f:viewParam name="roleName" value="#{roleDetailBean.roleName}"></f:viewParam>
	</f:metadata>

	<ui:composition template="/template/template.xhtml">
		<ui:define name="title">Role Detail</ui:define>
		
		<ui:define name="breadcrumb">
	        <li>Security</li>
	        <li>/</li>
	        <li><a href="roles.xhtml">Role</a></li>
	        <li>/</li>
	        <li><a href="roledetail.xhtml?roleName=#{roleDetailBean.roleName}">#{roleDetailBean.roleName}</a></li>
	    </ui:define>
		
		<ui:define name="content">
			<div class="ui-fluid role-detail">
                <div class="ui-g">
	                <div class="ui-g-12 ui-md-6 ui-lg-6 dashboard-card ui-panelgrid">
		                <p:panel header="Information">
		                	<h:form id="roleInformationForm">
		                		<p:growl for="informationSaveSuccess" autoUpdate="true"/>
			                	<p:commandButton id="saveRoleInformation" actionListener="#{roleDetailBean.saveRoleInfos}" title="Save changes" icon="ui-icon-save" styleClass="primary-btn card-button" />
			                	<p:commandButton id="createNewChildRole" type="button" onclick="PF('newChildRoleModal').show()" title="Add new child role" icon="ui-icon-add" styleClass="amber-btn card-button" />
			                	<p:commandButton id="deleteRole" type="button" onclick="PF('deleteRoleConfirmDialog').show()" title="Delete this role" icon="ui-icon-delete" styleClass="red-btn card-button"/>
			                	<p:confirmDialog message="Are you sure about deleteing the role '#{roleDetailBean.roleName}'?" header="Delete Role" severity="alert" widgetVar="deleteRoleConfirmDialog">
									<p:commandButton value="Yes" ajax="false" immediate="true" action="#{roleDetailBean.deleteRole}" icon="ui-icon-check" style="width: inherit;"/>
									<p:commandButton value="Cancel" onclick="PF('deleteRoleConfirmDialog').hide();" type="button" icon="ui-icon-close" style="width: inherit;"/>
								</p:confirmDialog>
			                	<p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
			                        <h:panelGroup styleClass="md-inputfield">
			                            <p:inputText disabled="true" value="#{roleDetailBean.role.name}"/>
			                            <label>Name</label>
			                        </h:panelGroup>
		                    	</p:panelGrid>
	                    	</h:form>
		                </p:panel>
		                <p:dialog style="min-width: 300px;" header="Add new child role for #{roleDetailBean.roleName}" widgetVar="newChildRoleModal" modal="true" responsive="true" closeOnEscape="true">
                        	<h:form id="newChildRoleForm">
	                        	<p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group modal-input-form">
			                        <h:panelGroup styleClass="md-inputfield">
			                            <p:inputText id="newChildRoleNameInput" requiredMessage="Value is required" value="#{roleDetailBean.newChildRoleName}" required="true"/>
			                            <label>Name</label>
			                            <p:message for="newChildRoleNameInput" id="newRoleNameMessage" />
			                        </h:panelGroup>
		                    	</p:panelGrid>
		                    	<p:commandButton id="saveNewRole" validateClient="true" actionListener="#{roleDetailBean.createNewChildRole}" ajax="false" update="@form" value="Save" icon="ui-icon-save" styleClass="primary-btn modal-input-button" />
			                	<p:commandButton id="cancelNewRole" onclick="PF('newChildRoleModal').hide();" value="Cancel" type="button" icon="ui-icon-clear" styleClass="secondary-btn modal-input-button"/>
                        	</h:form>
                        </p:dialog>
		            </div>
                </div>
            </div>
		</ui:define>
	</ui:composition>
</h:body>
</html>