<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:cc="http://xmlns.jcp.org/jsf/composite"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui">
<cc:interface>
  <cc:attribute name="url" />
  <cc:attribute name="result" />
  <cc:attribute name="testMethod" />
</cc:interface>
<cc:implementation>
  <p:dialog width="50%" header="Connection Test - Url: #{cc.attrs.url}" id="connectionTestModel" styleClass="ui-fluid"
    widgetVar="connectionTestModel" modal="true" responsive="true" closeOnEscape="true" style="margin-left: 120px;">
    <h:form id="connTestForm">
      <p:ajaxStatus>
        <f:facet name="start">
          <i class="fa fa-circle-o-notch fa-spin ajax-loader" aria-hidden="true"></i>
        </f:facet>
        <f:facet name="complete">
          <h:outputText value="" />
        </f:facet>
      </p:ajaxStatus>
      
      <p:panelGrid columns="1" layout="grid" id="resultLog"
        styleClass="ui-panelgrid-blank form-group modal-input-form ui-fluid">
        <h:outputText value="#{cc.attrs.result.testResult}" style="font-weight: bold; color: #{cc.attrs.result.testResultColor}" />
        
        <pre style="max-height: 400px; overflow: auto; margin: 0;">#{cc.attrs.result.message}</pre>
      </p:panelGrid>
      <p:commandButton id="testConnectionBtn" title="Test External Database Connection" update="@form" value="Test"
        icon="ui-icon-call-made" styleClass="primary-btn modal-input-button" actionListener="#{cc.attrs.testMethod}" immediate="true"
        process="@this" async="true"/>
      <p:commandButton id="closeConTesterDialog" onclick="PF('connectionTestModel').hide();" value="Close" type="button"
        icon="ui-icon-clear" styleClass="secondary-btn modal-input-button" />
    </h:form>
  </p:dialog>
</cc:implementation>
</html>
