<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui">
<cc:interface>
  <cc:attribute name="url" />
  <cc:attribute name="result" />
  <cc:attribute name="reset" />
  <cc:attribute name="testMethod" />
  <cc:attribute name="saveHint" default="false" />
</cc:interface>
<cc:implementation>
  <p:dialog header="Connection Test - Url: #{cc.attrs.url}" id="connectionTestModel" width="60%"
    widgetVar="connectionTestModel" modal="true" responsive="false" closeOnEscape="true">
    <p:staticMessage rendered="#{cc.attrs.saveHint}" severity="info" summary="Info" detail="Make sure that you saved your changes before you test the connection." />
    <h:form id="connTestForm" styleClass="custom-dialog-form">
      <p:panelGrid columns="1" layout="flex" id="resultLog" styleClass="ui-fluid">
        <h:outputText value="#{cc.attrs.result.testResult}"
          style="font-weight: bold; color: #{cc.attrs.result.testResultColor}" />
        <pre style="max-height: 200px; overflow: auto; margin: 0;">#{cc.attrs.result.message}</pre>
      </p:panelGrid>
      <div class="custom-dialog-footer">
        <p:commandButton id="closeConTesterDialog" onclick="PF('connectionTestModel').hide(); #{cc.attrs.reset};" value="Close" type="button"
          styleClass="modal-input-button ui-button-secondary ui-button-flat"/>
        <p:commandButton id="testConnectionBtn" title="Test Connection" update="@form" value="Test"
          icon="si si-arrow-right" styleClass="modal-input-button" actionListener="#{cc.attrs.testMethod}"
          immediate="true" process="@this" async="true" onclick="buttonAddSpinner(this);" />
      </div>
    </h:form>
  </p:dialog>
</cc:implementation>

</html>
