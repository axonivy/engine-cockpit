<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite"
  xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui">
<cc:interface>
  <cc:attribute name="url" />
</cc:interface>
<cc:implementation>
  <p:dialog style="max-width: 500px; max-height: 200px"
    header="TLS Test connection" id="testTLSResult"
    widgetVar="testTLSResult" modal="true" responsive="true"
    closeOnEscape="true">
    <ui:composition>
      <h:form id="form">
        <p:dataTable value="#{tlsTesterBean.testResult}" var="logEntry"
          rowKey="#{logEntry.result == 0 ? 'fail' : (logEntry.result == 1 ? 'success' : 'info')}"
          id="logList" lazy="false" scrollable="true" scrollWidth="100%"
          scrollHeight="250"/>
          <p:column width="30px"
            style="background-color: #{logEntry.result == 2 ? 'grey' : ''}">
            <p:rowToggler rendered="#{logEntry.result != 2}"/>
          </p:column>
          <p:column headerText="Tests"
            style="background-color: #{logEntry.result == 2 ? 'grey' : ''}">
            <h:outputText value="#{logEntry.group}"></h:outputText>
            <h:panelGroup id="info">
              <i class="si si-question-circle"></i>
              <p:tooltip for="info" value="#{logEntry.groupInfo}" />
            </h:panelGroup>
          </p:column>
          <p:column style="background-color: #{logEntry.result == 2 ? 'grey' : ''}">
            <h:outputText
              styleClass="fa fa-fw fa-2x #{logEntry.result == 0 ? 'fa-close' : (logEntry.result == 1 ? 'fa-check-square-o' : 'fa-info')}"
              style="float:left; color: #{logEntry.result == 0 ? 'red' : (logEntry.result == 1 ? 'green' : 'grey')};" />
          </p:column>
          <p:rowExpansion>
            <p:repeat value="#{logEntry.entryList}" var="logDataEntry"
              id="logDataList">
              <h:panelGrid style="height:10px" columns="1">
                <h:outputText value="#{logDataEntry}" />
              </h:panelGrid>
            </p:repeat>
          </p:rowExpansion>
        </p:dataTable>
        <h:panelGrid columns="2">
          <f:facet name="header">
            <p:messages></p:messages>
          </f:facet>
        </h:panelGrid>
      </h:form>
    </ui:composition>
  </p:dialog>
</cc:implementation>
</html>
