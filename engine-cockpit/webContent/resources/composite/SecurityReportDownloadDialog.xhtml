<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui">

  <cc:interface>
    <cc:attribute name="bean" />
    <cc:attribute name="title" />
  </cc:interface>
  <cc:implementation>
    <p:dialog style="min-width: 400px;" header="#{cc.attrs.title}" id="securityReportDownloadModal" widgetVar="securityReportDownloadModal"
        modal="true" responsive="true" closeOnEscape="false">
        <h:form id="downloadForm">
            <p:growl id="growl"/>
             <h:panelGrid style="width:100%; height:100%;">
                <h:panelGroup>
                <p:progressBar rendered="#{cc.attrs.bean.showProgressBar}" widgetVar="progressBar" ajax="true" value="#{cc.attrs.bean.progress}"
                    labelTemplate="{value}%" styleClass="mt-3" global="false">
                    <p:ajax event="complete" listener="#{cc.attrs.bean.onComplete}" update="growl"
                        oncomplete="PF('downloadButton').enable()" />          
                </p:progressBar>
                </h:panelGroup>
                <h:panelGroup>
                  <p:commandButton id="downloadButton" value="#{cc.attrs.bean.value}" widgetVar="downloadButton"
                     action="#{cc.attrs.bean.startReport}"
                     update="downloadForm"
                    oncomplete="PF('progressBar').start(); PF('downloadButton').disable();"
                    title="#{cc.attrs.bean.value}" styleClass="modal-input-button" style="width: 160px;">
                  </p:commandButton>
                  <p:commandButton title="#{cc.attrs.bean.downloadValue}" ajax="false" icon="si si-download-bottom" styleClass="modal-input-button" style="width: 100px;">
                      <p:fileDownload value="#{cc.attrs.bean.allResourcesDownload}" />
                  </p:commandButton>
                  <p:commandButton id="cancel" onclick="PF('securityReportDownloadModal').hide();" value="Cancel" type="button"
                      styleClass="ui-button-secondary ui-button-flat modal-input-button" />
                </h:panelGroup>
             </h:panelGrid>
        </h:form>
    </p:dialog>
  </cc:implementation>
</html>