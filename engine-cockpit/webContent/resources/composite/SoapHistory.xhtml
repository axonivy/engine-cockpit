<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui">
<cc:interface>
  <cc:attribute name="bean" required="true" />
</cc:interface>
<cc:implementation>
  <div class="card">
  <h:form id="execHistoryForm" style="overflow: auto;">
    <div class="card-header">
      <div class="card-title flex align-items-center">
        <i class="pr-3 si si-optimization-timer"></i>
        <h6 class="m-0">Execution History (last 200)</h6>
      </div>
    </div>

      <p:dataTable value="#{cc.attrs.bean.executionHistory}" var="exec"
        id="execHistoryTable" paginator="true" rows="5" tableStyle="width:auto"
        paginatorPosition="bottom" paginatorAlwaysVisible="false">
        
        <p:column headerText="Timestamp" sortBy="#{exec.timestamp()}">
          <h:outputText value="#{exec.prettyTime}" title="#{exec.formattedTime}"/>
        </p:column>

        <p:column headerText="Exec Time"
          sortBy="#{exec.execTime()}">
          <h:outputText value="#{exec.execTime()} ms" title="The time needed to execute the statement" />
        </p:column>

        <p:column headerText="Endpoint" style="word-wrap: anywhere;">
          <h:outputText value="#{exec.endpoint()}" />
        </p:column>
        
        <p:column headerText="Port" sortBy="#{exec.port()}">
          <h:outputText value="#{exec.port()}" />
        </p:column>
        
        <p:column headerText="Operation" sortBy="#{exec.operation()}">
          <h:outputText value="#{exec.operation()}" />
        </p:column>
        
      </p:dataTable>
    </h:form>
</div>
</cc:implementation>

</html>
