<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui">
<cc:interface>
  <cc:attribute name="index" default="0" />
  <cc:attribute name="filters" />
  <cc:attribute name="selectedFilters" />
  <cc:attribute name="resetFilters" />
  <cc:attribute name="update" />
  <cc:attribute name="filterText" default="none" />
</cc:interface>
<cc:implementation>
  <h:form id="form">
    <h:panelGroup>
      <p:commandButton id="filterBtn" value="Filter: #{cc.attrs.filterText}" icon="si si-filter-1" type="button"
        style="padding-right: 25px;" styleClass="secondary-btn" onclick="PF('filterPanel_#{cc.attrs.index}').show();" />
      <p:commandLink id="resetFilter" styleClass="si si-delete-2" update="#{cc.attrs.update}"
        actionListener="#{cc.attrs.resetFilters}"
        style="font-family: StreamlineIcons; position: absolute; top:8px; right: 7px; color: var(--button-secondary-text-color);" />
    </h:panelGroup>

    <p:overlayPanel id="filterPanel" for="filterBtn" widgetVar="filterPanel_#{cc.attrs.index}"
      style="min-width: 250px;">
      <p:selectManyCheckbox id="filterCheckboxes" layout="grid" columns="1" value="#{cc.attrs.selectedFilters}">
        <f:selectItems value="#{cc.attrs.filters}" var="filter" itemLabel="#{filter}" itemValue="#{filter}" />
      </p:selectManyCheckbox>

      <h:panelGroup layout="block" style="margin-top: 10px;">
        <p:commandButton id="applyFilter" value="Apply" class="modal-input-button" icon="si si-check-1"
          update="#{cc.attrs.update}" />
        <p:commandLink id="cancelFilter" value="Cancel" class="modal-input-button"
          onclick="PF('filterPanel_#{cc.attrs.index}').hide();" />
      </h:panelGroup>
    </p:overlayPanel>
  </h:form>
</cc:implementation>

</html>
